# lvvi

This branch is a demo project that only supports mediapipe `hand_tracking`.

You can get a map with `Left` or `Right` as the key (representing the left or right hand) and `vector<vector<double>>` as the value, and a cv::Mat processed with a mediapipe.

There is a dynamic library in the `lib` directory, but you should regenerate it on your own computer and put it in the corresponding `lib` directory. The following is the tutorial for generating a dynamic link library.

```bash
git clone https://github.com/liuyulvv/mediapipe.git
git switch dev
# You should make sure that mediapipe is configured.
bazel build -c opt --define MEDIAPIPE_DISABLE_GPU=1 mediapipe/dll:mediapipe # Mac and Linux, Windows needs to specify the python path.
```

Copy the generated files under `bazel-bin/mediapipe/dll` to the `lib` and `bin` directory.

For Mac and Linux, copy `libmediapipe.so` to the corresponding directory of `lib`. For Windows, copy `mediapipe.dll` to the `Release` directory(to use `Debug`, you need to modify CMakeLists), and copy `mediapipe.if.lib` to `lib\windows` and rename to `mediapipe.lib`

## Important for Linux

Using the dynamic library of mediapipe on Linux is much more troublesome than I thought.

The following is the environment where I passed the test:

    - Ubuntu 22.04.1
    - Clang 14

The dynamic link library generated by the mediapipe compiled with the default settings.

When I tested with current project, I encountered a lot of problems. Here are two very important problems.

### OpenCV

I installed opencv from `apt` according to the tutorial of mediapipe. And I encountered a segment error about `protobuf` while running the current project.

I tried many methods, and finally remove the `opencv` installed by `apt`. After using the 'setup_opencv.sh' of mediapipe, the error disappeared.

### Clang

Compile the current project with GCC, `matCallback` and `landmarkCallback` will trigger the `bad_function_call` exception. The same project does not have this exception on Windows and Mac.

After I changed to `clang`, this exception also disappeared.

## Other

Questions about the current project can be communicated with me in the current project.

For questions related to `mediapipe`, please communicate with me [here](https://github.com/liuyulvv/mediapipe).